<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:zxing="clr-namespace:ZXing.Net.Maui.Controls;assembly=ZXing.Net.MAUI.Controls"
             x:Class="TypingSoft.Borneo.AppMovil.Pages.LoginPage"
             Background="{StaticResource PageBackgroundBrush}"
             Appearing="OnPageAppearing"
             NavigationPage.HasNavigationBar="False">
    <AbsoluteLayout>
        <ScrollView AbsoluteLayout.LayoutBounds="0,0,1,1" AbsoluteLayout.LayoutFlags="All">
            <StackLayout Spacing="0">
                <Grid HeightRequest="80">
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="{StaticResource Primary}" Offset="0"/>
                            <GradientStop Color="{StaticResource Gray900}" Offset="1"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <Label Text="Iniciar sesiÃ³n" FontSize="24" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center" VerticalOptions="Center"/>
                </Grid>

                <StackLayout x:Name="MainLayout" Padding="20" Spacing="25">
                    <Frame BackgroundColor="{StaticResource Primary}" WidthRequest="80" HeightRequest="80" Padding="0" CornerRadius="40" HasShadow="True" HorizontalOptions="Center" Margin="0,10">
                        <Label Text="ðŸ‘¤" TextColor="White" FontSize="40" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>

                    <Frame CornerRadius="18" Padding="0" HasShadow="True" BorderColor="{StaticResource Primary}" Background="{StaticResource CardBackgroundBrush}" HorizontalOptions="Center" Margin="0,10" WidthRequest="250">
                        <VerticalStackLayout Spacing="8" Padding="0,10">
                            <Label Text="Escanea tu cÃ³digo QR" FontAttributes="Bold" TextColor="{StaticResource Primary}" HorizontalOptions="Center"/>
                            <BoxView HeightRequest="2" BackgroundColor="{StaticResource Primary}" Margin="40,0"/>
                            <zxing:CameraBarcodeReaderView x:Name="cameraBarcodeReaderView" IsVisible="True" BarcodesDetected="BarcodesDetected" HorizontalOptions="Center" VerticalOptions="Center" BackgroundColor="Black" HeightRequest="220" WidthRequest="180" Margin="0,10"/>
                            <Label Text="Coloca el QR dentro del recuadro" TextColor="{StaticResource TextPrimaryBrush}" HorizontalOptions="Center"/>
                        </VerticalStackLayout>
                    </Frame>

                    <BoxView HeightRequest="30" BackgroundColor="Transparent"/>
                </StackLayout>
            </StackLayout>
        </ScrollView>

        <AbsoluteLayout x:Name="LoadingOverlay" IsVisible="False" BackgroundColor="#80000000" AbsoluteLayout.LayoutFlags="All" AbsoluteLayout.LayoutBounds="0,0,1,1">
            <Frame Background="{StaticResource CardBackgroundBrush}" CornerRadius="20" Padding="30" HasShadow="True" AbsoluteLayout.LayoutBounds="0.5,0.5,-1,-1" AbsoluteLayout.LayoutFlags="PositionProportional">
                <StackLayout Spacing="15" HorizontalOptions="Center">
                    <ActivityIndicator x:Name="LoadingIndicator" IsRunning="False" Color="{StaticResource Primary}" WidthRequest="40" HeightRequest="40"/>
                    <Label x:Name="LoadingLabel" Text="Verificando..." TextColor="{StaticResource TextPrimaryBrush}" HorizontalOptions="Center"/>
                </StackLayout>
            </Frame>
        </AbsoluteLayout>
    </AbsoluteLayout>
</ContentPage>